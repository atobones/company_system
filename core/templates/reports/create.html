{% extends "base.html" %}
{% block title %}–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ ‚Äî {{ employee }}{% endblock %}

{% block content %}
<h1>–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ ‚Äî {{ employee }}</h1>

<form method="post">
  {% csrf_token %}
  <input type="hidden" name="date" value="{{ today }}">
  
  <table id="report-table">
    <thead>
      <tr>
        <th>–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã</th>
        <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
      </tr>
    </thead>
    <tbody id="table-body">
      {% for item in entries %}
      <tr>
        <td><input type="text" name="car_number[]" value="{{ item.car_number }}"></td>
        <td><input type="text" name="comment[]" value="{{ item.comment }}"></td>
        <td>
          <select name="status[]">
            <option value="–≤ –æ–∂–∏–¥–∞–Ω–∏–∏" {% if item.status == "–≤ –æ–∂–∏–¥–∞–Ω–∏–∏" %}selected{% endif %}>‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏</option>
            <option value="–Ω–µ –ø—Ä–∏–Ω—è—Ç–æ" {% if item.status == "–Ω–µ –ø—Ä–∏–Ω—è—Ç–æ" %}selected{% endif %}>‚ùå –ù–µ –ø—Ä–∏–Ω—è—Ç–æ</option>
            <option value="–≥–æ—Ç–æ–≤–æ" {% if item.status == "–≥–æ—Ç–æ–≤–æ" %}selected{% endif %}>‚úÖ –ì–æ—Ç–æ–≤–æ</option>
          </select>
        </td>
        <td><button type="button" onclick="removeRow(this)" class="btn-delete">‚úñ</button></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <button type="button" onclick="addRow()" class="btn-report">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>

  <div style="margin-top: 20px;">
    <button type="submit" class="btn btn-view">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <a href="{% url 'report_list' employee=employee %}" class="btn-back">‚Üê –ù–∞–∑–∞–¥</a>
  </div>
</form>

<script>
function addRow() {
  const tbody = document.getElementById('table-body');
  const row = document.createElement('tr');
  row.innerHTML = `
    <td><input type="text" name="car_number[]"></td>
    <td><input type="text" name="comment[]"></td>
    <td>
      <select name="status[]">
        <option value="–≤ –æ–∂–∏–¥–∞–Ω–∏–∏">‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏</option>
        <option value="–Ω–µ –ø—Ä–∏–Ω—è—Ç–æ">‚ùå –ù–µ –ø—Ä–∏–Ω—è—Ç–æ</option>
        <option value="–≥–æ—Ç–æ–≤–æ">‚úÖ –ì–æ—Ç–æ–≤–æ</option>
      </select>
    </td>
    <td><button type="button" onclick="removeRow(this)" class="btn-delete">‚úñ</button></td>
  `;
  tbody.appendChild(row);
}

function removeRow(btn) {
  btn.closest('tr').remove();
}
</script>
{% endblock %}
