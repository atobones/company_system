{% extends "base.html" %}
{% block title %}ĞœĞ°ÑˆĞ¸Ğ½Ñ‹{% endblock %}
{% block content %}

<!-- ĞšĞĞĞŸĞšĞ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ -->
{% if is_admin %}
<a href="{% url 'add_car' %}" class="btn btn-report">â• Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¼Ğ°ÑˆĞ¸Ğ½Ñƒ</a>
{% endif %}

<h2 style="margin-top: 20px;">Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ°ÑˆĞ¸Ğ½</h2>

<input type="text" id="searchInput" placeholder="ĞŸĞ¾Ğ¸ÑĞº..." style="margin-bottom: 10px; padding: 5px; width: 300px;">

<ul id="carList">
  {% for car in cars %}
  <li class="list-item" style="background-color: {% if car.color_status == 'red' %}#ffe6e6{% else %}#e6ffe6{% endif %};">
    <div>
      <strong>{{ car.registration_number }}</strong>
      {% if car.driver %}
        <div style="font-size: 13px; color: #555;">ğŸ‘¤ {{ car.driver.full_name }}</div>
      {% endif %}
    </div>

    <div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center;">
      {% if car.color_status == 'red' and car.driver %}
        <a href="{% url 'car_contact' car.id %}" class="btn btn-view">ğŸ“ Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ</a>
      {% endif %}
      <a href="{% url 'upload_car_file' car.id %}" class="btn btn-download">ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹</a>

      {% if is_admin %}
      <a href="{% url 'edit_car' car.id %}" class="btn btn-edit">âœï¸ Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ</a>
      <a href="{% url 'delete_car' car.id %}" class="btn btn-delete">ğŸ—‘ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ</a>
      {% endif %}
    </div>
  </li>
  {% endfor %}
</ul>

<script>
  const searchInput = document.getElementById('searchInput');
  const list = document.getElementById('carList').getElementsByTagName('li');

  searchInput.addEventListener('input', function() {
    const query = this.value.toLowerCase();
    for (let item of list) {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(query) ? '' : 'none';
    }
  });
</script>

{% endblock %}
